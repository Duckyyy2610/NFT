{% load my_custom_tags %}
<div class="container-favorite flex_aic_jcc">
    <div class="favorite">
        <div class="favorite__head flex_aic_jcc">
            <p class="favorite__by">Favorited by</p>
            <button class="favorite__close close-button">
                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"/></svg>
            </button>
        </div>
        
        <ul class="favorite__list scroll">
            {% for product_favorite in product_favorite_list %}
            {% if forloop.counter <= product_favorite_list|length %}
            <li class="favorite__item flex_aic_jcc">
                <div class="favorite__info">
                    <a href="{% url 'profile' product_favorite.user.id %}" class="avatar-wrap favorite-person__avt-link">
                        <img src="{{product_favorite.user.avatar}}" alt="" class="favorite-person__avt avatar">
                    </a>
                    <div class="favorite-person flex_aic_jcc">
                        <div class="favorite-person__text-block flex_fdc_aif">
                            <a href="{% url 'profile' product_favorite.user.id %}" class="favorite-person__name">{{product_favorite.user.name}}</a>
                            <a href="{% url 'profile' product_favorite.user.id %}" class="favorite-person__id">{{product_favorite.user.id|limit_length_id}}</a>
                        </div>
                    </div>
                    <div class="favorite-person">
                        <a href="" class="favorite-person__follow flex_aic_jcc">
                            <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8" fill="none">
                                <path d="M3.2549 0V3.33333H0V4.64762H3.2549V8H4.72549V4.64762H8V3.33333H4.72549V0H3.2549Z" fill="#000"/>
                                </svg>
                            Follow
                        </a>
                    </div>
                
                </div>
            </li>
            {% endif %}
            {% endfor %}
        </ul>    
    </div>
</div>

<script>
    const favoriteCloseButton = document.querySelector(".favorite__close");
    const favoriteBlock = document.querySelector(".favorite");
    const favoriteContainer = document.querySelector(".container-favorite");
    favoriteCloseButton.onclick = (e) => {
        favoriteContainer.style.display = "none";
    }
    
    favoriteContainer.onclick =  (e) => {
        if (e.target !== favoriteBlock) {
            favoriteContainer.style.display = "none";
        }
    };
    
    favoriteBlock.onclick = (e) => {
        e.stopPropagation();
    }
</script>
